#include "dfl/dfl.hpp"
#include <iostream>
#include <functional>
#include <map>

using namespace dfl;

int main (){
    int64_t even_sum = 0;
    int64_t odd_sum = 0;
    
    gen::range(1'452'235'916)
    >>= pipe::transform(_mod_(13)(_mult(2)))
    >>= pipe::fork(
        pipe::filter(_even) 
        >>= pipe::scanl(_add, 0LL) 
        >>= sink::sum(even_sum)
        ,
        pipe::filter(_odd)
        >>= pipe::scanl(_add, 0LL) 
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= pipe::set_var(odd_sum)
        >>= sink::hole()
    );
    printf("e: %lld o: %lld\n", even_sum, odd_sum);
}
